<ng-template #loading>
  <div class="text-center py-5">
    <div class="spinner-border text-primary" role="status">
      <span class="visually-hidden">Loading...</span>
    </div>
  </div>
</ng-template>

<div class="p-3 col-lg-6 offset-lg-3" *ngIf="!isLoading; else loading">

  <h3 class="mb-3">Update my profile</h3>

  <div class="form-floating mb-3">
    <input type="text"
           class="form-control"
           id="name"
           name="name"
           placeholder="Username"
           [(ngModel)]="profileForm.name">
    <label for="name">Username:</label>
  </div>

  <div class="form-floating mb-3">
    <input type="email"
           class="form-control"
           id="email"
           name="email"
           placeholder="name@example.com"
           [(ngModel)]="profileForm.email">
    <label for="email">E-mail address:</label>
  </div>

  <div class="form-floating mb-3">
    <input type="text"
           class="form-control"
           id="phone"
           name="phone"
           placeholder="Phone"
           [(ngModel)]="profileForm.phone">
    <label for="phone">Phone:</label>
  </div>

  <div class="form-floating mb-3">
    <input type="text"
           class="form-control"
           id="address"
           name="address"
           placeholder="Address"
           [(ngModel)]="profileForm.address">
    <label for="address">Address:</label>
  </div>

  <hr>

  <div class="form-floating mb-3">
    <input type="text"
           class="form-control"
           id="regdate"
           placeholder="Registration date"
           [value]="profileMeta.reg || '-'"
           disabled>
    <label for="regdate">Registration date:</label>
  </div>

  <div class="form-floating mb-3">
    <input type="text"
           class="form-control"
           id="lastlogin"
           placeholder="Last login date"
           [value]="profileMeta.last || '-'"
           disabled>
    <label for="lastlogin">Last login date:</label>
  </div>


  <button class="mb-3 btn btn-primary"
          type="button"
          [disabled]="isSaving"
          (click)="save()">
    <i class="bi" [ngClass]="isSaving ? 'bi-hourglass-split' : 'bi-arrow-repeat'"></i>&nbsp;&nbsp;
    {{ isSaving ? 'Updating...' : 'Update profile' }}
  </button>

  <app-passmod class="mt-5 d-block"></app-passmod>

</div>
